#docker registry monitoring
# Append the following two lines into /etc/sudoers file, to make sure no password needed when running below scripts
# zabbix  ALL=(ALL) NOPASSWD: /opt/monitor/zabbix/containerHelper.py
# zabbix  ALL=(ALL) NOPASSWD: /opt/monitor/zabbix/countContainers.sh
# zabbix  ALL=(ALL) NOPASSWD: /opt/monitor/zabbix/countRegistryRepos.sh
# zabbix  ALL=(ALL) NOPASSWD: /opt/monitor/zabbix/nginx_status.sh

UserParameter=docker.runningcontainer.count,sudo /opt/monitor/zabbix/countContainers.sh running
#docker registry monitoring
UserParameter=docker.registry.status,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-dockerhub status
UserParameter=docker.registry.cpu,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-dockerhub cpu all
UserParameter=docker.registry.memory,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-dockerhub memory
UserParameter=docker.registry.ip,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-dockerhub ip
UserParameter=docker.registry.reponum,/opt/monitor/zabbix/countRegistryRepos.sh https://127.0.0.1:5001/v2/_catalog

#Google Container Registry(GCR) monitoring
UserParameter=googlecontainer.registry.status,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-gcr status
UserParameter=googlecontainer.registry.cpu,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-gcr cpu all
UserParameter=googlecontainer.registry.memory,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-gcr memory
UserParameter=googlecontainer.registry.ip,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-gcr ip
UserParameter=googlecontainer.registry.reponum,/opt/monitor/zabbix/countRegistryRepos.sh https://127.0.0.1:6001/v2/_catalog

#quay monitoring
UserParameter=quay.registry.status,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-quay status
UserParameter=quay.registry.cpu,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-quay cpu all
UserParameter=quay.registry.memory,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-quay memory
UserParameter=quay.registry.ip,sudo /opt/monitor/zabbix/containerHelper.py registry-proxy-quay ip
UserParameter=quay.registry.reponum,/opt/monitor/zabbix/countRegistryRepos.sh https://127.0.0.1:7001/v2/_catalog

#nginx monitoring
UserParameter=nginx.accepts,/opt/monitor/zabbix/nginx_status.sh accepts
UserParameter=nginx.handled,/opt/monitor/zabbix/nginx_status.sh handled
UserParameter=nginx.requests,/opt/monitor/zabbix/nginx_status.sh requests
UserParameter=nginx.connections.active,/opt/monitor/zabbix/nginx_status.sh active
UserParameter=nginx.connections.reading,/opt/monitor/zabbix/nginx_status.sh reading
UserParameter=nginx.connections.writing,/opt/monitor/zabbix/nginx_status.sh writing
UserParameter=nginx.connections.waiting,/opt/monitor/zabbix/nginx_status.sh waiting
